{% extends "base.html" %}

{% block title %}
  Dashboard
{% endblock %}

{% block super_content %}
{% if user.is_staff %}
<div id="content" class="column span-13 colborder">
{% else %}
<div id="content" class="column span-19 last">
{% endif %}
  <h2>Dashboard</h2>
  
  <p>Here is where you can monitor your progress and take new tests, or 
  <a href="{% url tutor_about %}">read about</a> the project.</p>

  <h3>Progress on {{user.get_profile.syllabus.tag}}</h3>
  {% if not stats.has_questions %}
    <p>No statistics yet. Take a test to get some results.</p>
  {% else %}
    <p>You have taken {{stats.n_tests}} test{{stats.n_tests|pluralize}} so far.</p>
    <table>
      <thead>
        <th>&nbsp;</th><th>Long run</th><th>Most recent test</th>
      </thead>
      <tbody>
      <tr>
        <th># of questions</th>
        <td>{{stats.long_run.n_questions}}</td>
        <td>{{stats.most_recent.n_questions}}</td>
      </tr>
      <tr>
        <th>Accuracy</th>
        <td>{{stats.long_run.pc_correct|floatformat:1}}%</td>
        <td>{{stats.most_recent.pc_correct|floatformat:1}}%</td>
      </tr>
      </tbody>
    </table>
  {% endif %}

  <h3>Actions</h3>
  <form method="POST" action="{% url tutor_testuser %}">
  <p>
  <input type="submit" value="Take a test &rarr;">
  (with 
  <select name="n_questions">
    <option value="10" selected="selected">10</option>
    <option value="20">20</option>
    <option value="30">30</option>
    <option value="50">50</option>
  </select> questions)
  </p>
  </form>

  </div>

  {% if user.is_staff %}
  <div class="column span-5 last">
  <h3>Admin panel</h3>
  <ul>
    <li><a href="/admin/">Admin interface</a></li>
    <li><a href="{% url analysis_home %}">Analysis dashboard</a></li>
  </ul>
  </div>
  {% endif %}

{% endblock %}
